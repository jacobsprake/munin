# Python engine for Munin inference pipeline
# Runs the 5-stage pipeline: ingest → graph → health → incidents → packets
FROM python:3.12-slim

WORKDIR /app

# Install Python dependencies
COPY engine/requirements.txt engine/requirements.txt
RUN pip install --no-cache-dir -r engine/requirements.txt

# Copy engine code and supporting files
COPY engine/ engine/
COPY playbooks/ playbooks/

ENV PYTHONPATH=/app/engine

CMD ["python3", "engine/run.py"]
